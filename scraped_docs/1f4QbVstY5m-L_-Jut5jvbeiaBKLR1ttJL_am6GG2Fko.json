{
  "doc_id": "1f4QbVstY5m-L_-Jut5jvbeiaBKLR1ttJL_am6GG2Fko",
  "title": "Untitled Document",
  "version": "unknown",
  "source_url": "https://www.google.com/url?q=https://docs.google.com/document/d/1f4QbVstY5m-L_-Jut5jvbeiaBKLR1ttJL_am6GG2Fko/edit&sa=D&source=editors&ust=1751893809709790&usg=AOvVaw0AHjtVVuZ9cHtQeenbHCz7",
  "main_content": "Revision History\nVersionDateChanges0.727th Jan 2023Changed serviceability construct definition for providers to use category_id from enhanced taxonomyhere;0.62nd Jan 2023Changed serviceability construct definition for providers to include L4 categories;0.520th Dec 2022Added serviceability construct for pincode and pan-India;Serviceability construct will become mandatory for a merchant0.417th Sept 2022Added radius.unit (optional)0.35th Sept 2022Added holidays for stores0.23rd Sept 2022Added comments from participants0.12nd Sept 2022Created\nVersion\nDate\nChanges\n0.7\n27th Jan 2023\nChanged serviceability construct definition for providers to use category_id from enhanced taxonomyhere;\n0.6\n2nd Jan 2023\nChanged serviceability construct definition for providers to include L4 categories;\n0.5\n20th Dec 2022\nAdded serviceability construct for pincode and pan-India;\nServiceability construct will become mandatory for a merchant\n0.4\n17th Sept 2022\nAdded radius.unit (optional)\n0.3\n5th Sept 2022\nAdded holidays for stores\n0.2\n3rd Sept 2022\nAdded comments from participants\n0.1\n2nd Sept 2022\nCreated\nOverview\nThe objective of this note is to propose aserviceability constructfor retail providers (merchants) on ONDC. This serviceability construct will allow a provider to define the following:\nLocation constraint- geographic boundaries within which the provider can fulfil orders. For hyperlocal, this is a construct based on lat/long coordinates such as circle, polygon (based on h3 / s2 cells) or any other universally referenceable GPS coordinate system, and for inter-city, derived based on pincodes.Location constraint has to be explicitly defined. For an interim period, if the location constraint isn’t defined, it will be restricted to default radius of 3km;\nTiming constraint- store timings, if any, within which the provider accepts orders at their stores and holidays for the store.Timing constraint has to be explicitly defined. For an interim period, if the timing constraint isn’t defined, it will be restricted to default timings (TBD);\nThe serviceability construct will allow a buyer app todisplay catalogs, for only those stores, that can fulfil orders for a buyer, at a specific time, at their location.\nOptions\nThe ideal way to define the location constraints is to have a global geospatialreferenceableindex for a region on the map which defines the serviceability boundaries for the provider. Since this is not available, most technologies create squares (S2) or hexagons (h3) with indexes that are either predefined or dynamically generated.\nThus to define a region, around a specific location, in h3, we start with a hexagon around the geo-coordinates of the location at a granular resolution (say 10) and then polyfill the regionaround thehexagon. H3 libraries create multiple hexagons, of different resolutions, and some of these hexagons overlap. All the hexagons need to be above a specific resolution to allow set matching operations to determine whether an user, at a different location, is within the serviceability boundaries of this provider. This will result in a large number of h3 indexes, based on the size & type of the region.\nProposal\nSince the protocol is optimized for data transfer between participants, the serviceability construct that needs to be communicated should be easy to configure for participants and be as lightweight as possible.Hence, the proposal is to define serviceability construct as follows:\nHyperlocal serviceability (using circle, i.e. lat/long & radius);\nInter-cityserviceability (using pincodes);\nPan-India serviceability explicitly defined;\nProposed payloads for serviceability constraint are defined below:\nLocation constraint\ni.Hyperlocal serviceability\n\"providers\":\n[\n{\n\"id\":\"18275-ONDC-1\",\n\"descriptor\":\n{\n},\n\"locations\":\n[\n{\n\"id\":\"abc-store-location-id-1\",\n\"gps\":\"12.967555,77.749666\",\n\"address\":\n{\n\"street\":\"Jayanagar 4th Block\",\n\"city\":\"Bengaluru\",\n\"area_code\":\"560076\",\n\"state\":\"KA\"\n}\n\"circle\":\n{\n\"gps\":\"12.967555,77.749666\",\n\"radius\":\n{\n\"unit\":\"km\",\n\"value\":\"5\"\n}\n},\n}\n],\n\"tags\":\n[\n{\n\"code\":\"serviceability\",\n\"list\":\n[\n{\n\"code\":\"location\",\n\"value\":\"abc-store-location-id-1[a][b][c]\"\n},\n{\n\"code\":\"category\",\n\"value\":\"Eggs, Meat & Fish\"\n},\n{\n\"code\":\"type\",\n\"value\":\"10[d][e][f]\"\n},\n{\n\"code\":\"val\",\n\"value\":\"5[g][h][i][j][k]\"\n},\n{\n\"code\":\"unit\",\n\"value\":\"km[l]\"\n}\n]\n},\n{\n\"code\":\"serviceability\",\n\"list\":\n[\n{\n\"code\":\"location\",\n\"value\":\"abc-store-location-id-1[m][n][o]\"\n},\n{\n\"code\":\"category\",\n\"value\":\"Bakery, Cakes & Dairy\"\n},\n{\n\"code\":\"type\",\n\"value\":\"10[p][q][r]\"\n},\n{\n\"code\":\"val\",\n\"value\":\"3\"\n},\n{\n\"code\":\"unit\",\n\"value\":\"km[s]\"\n}\n]\n}\n],\nii. Intercity Serviceability\n\"providers\":\n[\n{\n\"id\":\"18275-ONDC-1\",\n\"descriptor\":\n{\n},\n\"locations\":\n[\n{\n\"id\":\"abc-store-location-id-1\",\n\"gps\":\"12.967555,77.749666\",\n\"address\":\n{\n\"street\":\"Jayanagar 4th Block\",\n\"city\":\"Bengaluru\",\n\"area_code\":\"560076\",\n\"state\":\"KA\"\n}\n}\n],\n\"tags\":\n[\n{\n\"code\":\"serviceability\",\n\"list\":\n[\n{\n\"code\":\"location\",\n\"value\":\"abc-store-location-id-1[t][u][v]\"\n},\n{\n\"code\":\"category\",\n\"value\":\"Gourmet & World Foods\"\n},\n{\n\"code\":\"type\",\n\"value\":\"1[w][x][y]1\"\n},\n{\n\"code\":\"val\",\n\"value\":\"560001-560076,560083\"[z][aa][ab]\n},\n{\n\"code\":\"unit\",\n\"value\":\"pincode\"\n}\n]\n}\n],\niii. Pan-India Serviceability\n\"providers\":\n[\n{\n\"id\":\"18275-ONDC-1\",\n\"descriptor\":\n{\n},\n\"locations\":\n[\n{\n\"id\":\"abc-store-location-id-1\",\n\"gps\":\"12.967555,77.749666\",\n\"address\":\n{\n\"street\":\"Jayanagar 4th Block\",\n\"city\":\"Bengaluru\",\n\"area_code\":\"560076\",\n\"state\":\"KA\"\n}\n}\n],\n\"tags\":\n[\n{\n\"code\":\"serviceability\",\n\"list\":\n[\n{\n\"code\":\"location\",\n\"value\":\"abc-store-location-id-1[ac][ad][ae]\"\n},\n{\n\"code\":\"category[af]\",\n\"value\":\"Kitchen Accessories\"\n},\n{\n\"code\":\"type\",\n\"value\":\"1[ag][ah][ai]2[aj][ak]\"\n},\n{\n\"code\":\"val\",\n\"value\":\"IND\"\n},\n{\n\"code\":\"unit\",\n\"value\":\"country\"\n}\n]\n}\n],\nTiming constraint[al][am]:\nDefine 2 different timing constraints -fixed timings and split timings[an](primarily for F&B restaurants).Either of these timing constraints may be used by providers to define their store timings.\nFixedtimings[ao][ap]\nProvider.locations.time.days = “1,2,3,4,5,6,7”; /* comma separated values for day of week when store accepts orders; 1 -Mondaytill 7 - Sunday. If store is closed on Sunday, above will be “1,2,3,4,5,6” */\nProvider.locations.time.range.start = “1100”; /* use HHMM for start time */\nProvider.locations.time.range.end = “2100”; /* use HHMM for end time */\nProvider.locations.time.schedule.holidays = [“2022-08-15”,”2022-08-19”];[aq]\nSplittimings[ar][as][at][au]\nProvider.locations.time.days = “1,2,3,4,5,6,7”; /* comma separated values for day of week when store accepts orders; 1 - Monday till 7 - Sunday. If store is closed on Sunday, above will be “1,2,3,4,5,6” */\nProvider.locations.time.schedule.frequency[av]= “PT4H[aw][ax][ay][az]”; /* ISO 8601 duration */\nProvider.locations.time.schedule.times = [“1100”, “1900”]; /* use HHMM for start time */\nProvider.locations.time.schedule.holidays = [“2022-08-15”,”2022-08-19”];[ba]\n[a]location id from above (for grocery, f&b, home & decor) or location id or \"*\" for all locations for provider (for other categories)\n[b]_Marked as resolved_\n[c]_Re-opened_\n[d]type of construct:\n\"10\" - hyperlocal;\n\"11\" - intercity;\n\"12\" - pan-India;\n[e]why can't we mention hyperlocal directly instead of 10?\n[f]for ease of codification\n[g]Seller apps should not use value higher than 4km for type \"10\". Buyer apps may use value of 4km for all values of type \"10\" that exceed this value;\n[h]@abhilash.kumar@agrevolution.in will this be a problem in our case?\n[i]value for construct type as defined above:\nfor \"10\" - hyperlocal;\nfor \"11\" - intercity;\nfor \"12\" - pan-India;\n[j]within city also, not only radius but pin codes can be given right? being in 1 area, seller may serve multiple pins in the same city..\n[k]yes\n[l]for type \"10\" => \"km\";\n\"11\" => \"pincode\";\n\"12\" => \"country\"\n[m]location id from above (for grocery, f&b, home & decor) or location id or \"*\" for all locations for provider (for other categories)\n[n]_Marked as resolved_\n[o]_Re-opened_\n[p]type of construct:\n\"10\" - hyperlocal;\n\"11\" - intercity;\n\"12\" - pan-India;\n[q]why can't we mention hyperlocal directly instead of 10?\n[r]for ease of codification\n[s]for type \"10\" => \"km\";\n\"11\" => \"pincode\";\n\"12\" => \"country\"\n[t]location id from above (for grocery, f&b, home & decor) or location id or \"*\" for all locations for provider (for other categories)\n[u]_Marked as resolved_\n[v]_Re-opened_\n[w]type of construct:\n\"10\" - hyperlocal;\n\"11\" - intercity;\n\"12\" - pan-India;\n[x]why can't we mention hyperlocal directly instead of 10?\n[y]for ease of codification\n[z]can include range of pin codes and/or individual pin codes\n[aa]Range will difficult to implement. I guess it should be pin codes or std codes or pan-india.\n[ab]@supriyo.  If we have 100 neigbour cities its difficult to add all the pincode.     Can we go with STDcodes ?  or  Distance based  like hyperlocal ?\n[ac]location id from above (for grocery, f&b, home & decor) or location id or \"*\" for all locations for provider (for other categories)\n[ad]_Marked as resolved_\n[ae]_Re-opened_\n[af]@supriyo@ondc.org is the category tag mandatory?\n_Assigned to supriyo@ondc.org_\n[ag]type of construct:\n\"10\" - hyperlocal;\n\"11\" - intercity;\n\"12\" - pan-India;\n[ah]why can't we mention hyperlocal directly instead of 10?\n[ai]for ease of codification\n[aj]for pan-India serviceability, list of pincodes is here - https://data.gov.in/node/6818285\n[ak]Thanks\n[al]The context of this construct seems to be only Retail orders for now, but store timings are very crucial to be communicated on the logistics contract as well, the LSP needs to know working hours before planning their trip, @supriyo@ondc.org pls consider this into the same doc or a new one.\n_Assigned to supriyo@ondc.org_\n[am]sure, will add\n[an]store timings represent order acceptance timings\n[ao]@supriyo@ondc.org\nValidations:\n1. Either times or range should exists\n2. Checking range for times+frequency\n2.1 that they aren't overlapping: hard check\n2.2 going beyond midnight: allow it\n3. Case not supported yet:\n1000-1600 (6hrs)\n1700-2000 (3hrs)\n_Assigned to supriyo@ondc.org_\n[ap]Store timing & Order Timing are could be different for the stores. Hence need a provision to handle this use case. @supriyo@ondc.org\n_Assigned to supriyo@ondc.org_\n[aq]list of holidays\n[ar]@supriyo : For F&B, if due to rush, the store is closed for 30 Min, How this case can be handled?\n[as]Pls note that timings indicate when the store is ready to receive online orders. Any reason why the store can't accept online orders during this duration?\n[at]Example : Domino's is open from 10 Am to 11 PM. At 7 PM, the flow of order was very high and to serve all the order with best quality, they want to stop accepting orders for 30 Mins. This usually happens in FnB case\n[au]@supriyo@ondc.org This need to be handled.\n[av]What does this schedule.frequency signify ?\n[aw]indicates the duration for which the store remains open from the schedule.times; this in this example, store will be open from 1100-1500 and 1900-2300.\n[ax]@supriyo@ondc.org - this will be a problem if the frequency is not same. In F &B , restaurants have timings like\n\"Tuesday:\"  10:00am-2:00pm, 4:00pm-1:00am.\nIn this case comma separated range will help,\nFor the example mentioned above ,the number of hours the restaurant works ,with split timings is mandated to be equal i,e exactly 4 hours .\n[ay]Agree with Vidya. A lot of restaurants have timings which may vary throughout the week. So maybe if we modify schedule.times to something like this\nprovider.locations.time.schedule.times =\n{\n\"1\" : [\n{\n\"time\": \"1100\"\n\"duration\": \"PT4H\"\n},\n{\n\"time\": \"1900\"\n\"duration\": \"PT6H\"\n}\n],\n\"2\" : [\n{\n\"time\": \"1000\"\n\"duration\": \"PT4H\"\n},\n{\n\"time\": \"1800\"\n\"duration\": \"PT7H\"\n}\n],\n}\nThis will give the required flexibility.\n[az]sorry, can't support this now with limitations in the protocol\n[ba]list of holidays",
  "footer_content": "",
  "enums": {
    "for day of week when store accepts orders; 1 -Mondaytill 7 - Sunday. If store is closed on Sunday, above will be “1,2,3,4,5,6” */\nProvider.locations.time.range.start = “1100”; /* use HHMM for start time */\nProvider.locations.time.range.end = “2100”; /* use HHMM for end time */\nProvider.locations.time.schedule.holidays = [“2022-08-15”,”2022-08-19”];[aq]\nSplittimings[ar][as][at][au]\nProvider.locations.time.days = “1,2,3,4,5,6,7”; /* comma separated values for day of week when store accepts orders; 1 - Monday till 7 - Sunday. If store is closed on Sunday, above will be “1,2,3,4,5,6” */\nProvider.locations.time.schedule.frequency[av]= “PT4H[aw][ax][ay][az]”; /* ISO 8601 duration */\nProvider.locations.time.schedule.times = [“1100”, “1900”]; /* use HHMM for start time */\nProvider.locations.time.schedule.holidays = [“2022-08-15”,”2022-08-19”];[ba]\n[a]location id from above (for grocery, f&b, home & decor) or location id or \"*\" for all locations for provider (for other categories)\n[b]_Marked as resolved_\n[c]_Re-opened_": [
      "d"
    ],
    "higher than 4km for type \"10\". Buyer apps may use value of 4km for all values of type \"10\" that exceed this value;\n[h]@abhilash.kumar@agrevolution.in will this be a problem in our case?": [
      "i"
    ]
  },
  "definitions": {
    "construct": "10",
    "Tuesday": "10:00am-2:00pm, 4:00pm-1:00am.\nIn this case comma separated range will help,\nFor the example mentioned above ,the number of hours the restaurant works ,with split timings is mandated to be equal i,e exactly 4 hours .\n[ay]Agree with Vidya. A lot of restaurants have timings which may vary throughout the week. So maybe if we modify schedule.times to something like this\nprovider.locations.time.schedule.times =\n{",
    "for": "providers to include L4 categories;"
  },
  "hyperlinks": [
    {
      "text": "here",
      "url": "https://www.google.com/url?q=https://docs.google.com/spreadsheets/d/1ayRbp-WmXwwbzp7z1MgRO0NuKZM1AQk4GGZ8SE4NTnw/edit%23gid%3D0&sa=D&source=editors&ust=1751893835344395&usg=AOvVaw0w8jQ_8kRiOKoS9Lq4krgx",
      "context": "here"
    }
  ]
}